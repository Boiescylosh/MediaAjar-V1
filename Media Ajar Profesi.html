<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Media Pembelajaran: Profesi (Interaktif)</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
  <style>
  
    /* --- 1. TEMA & WARNA --- */
    
    :root {
      --bg-color: #0f1724;
      --card-bg: #1e293b;
      --accent: #7c3aed; /* Purple */
      --accent-2: #06b6d4; /* Cyan */
      --text-light: #f3f4f6;
      --text-muted: #9ca3af;
      --glass: rgba(255, 255, 255, 0.05);
      --border: rgba(255, 255, 255, 0.1);
      --radius: 16px;
    }

    * { box-sizing: border-box; transition: all 0.3s ease; }

    body {
      margin: 0;
      font-family: 'Nunito', 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #0f1724 0%, #1e1b4b 100%);
      color: var(--text-light);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      padding: 0; 
    }

    /* --- CONTAINER UTAMA (Default untuk Mobile) --- */
    
    .app-container {
      width: 100%;
      max-width: 480px; 
      background: rgba(15, 23, 36, 0.90);
      backdrop-filter: blur(10px);
      border: none; 
      border-radius: 0; 
      overflow: hidden;
      box-shadow: none; 
      display: flex;
      flex-direction: column;
      min-height: 100vh; 
      position: relative;
    }
    
    /* --- MEDIA QUERY UNTUK LAYAR BESAR (LAPTOP/PC) --- */
    
    @media (min-width: 768px) {
        body {
            padding: 30px; 
        }
        .app-container {
            max-width: 1200px; 
            min-height: 90vh; 
            border: 1px solid var(--border); 
            border-radius: 24px; 
            box-shadow: 0 20px 50px rgba(0,0,0,0.5); 
        }
        
        /* Penyesuaian grid agar lebih banyak kolom di layar lebar */
        
        .profesi-grid { 
            grid-template-columns: repeat(4, 1fr); 
        }
        .game-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        .draggable-col, .drop-col {
            flex-direction: row; 
            flex-wrap: wrap; 
            justify-content: space-between;
        }
        .draggable-item, .drop-zone {
            width: 48%; 
        }
        .vocab-list { 
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); 
        }
    }


    /* --- LANDING PAGE --- */
    
    #landing-page {
      position: absolute;
      top: 0; left: 0; width: 100%; height: 100%;
      background: transparent; 
      z-index: 999;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 30px;
    }

    .hero-illustration {
      position: relative;
      width: 120px; height: 120px;
      margin-bottom: 30px;
      display: flex; align-items: center; justify-content: center;
    }
    .board-bg {
      position: absolute;
      width: 100%; height: 80%;
      background: #10B981;
      bottom: 0;
      border-radius: 12px;
      border: 4px solid #D97706;
      box-shadow: 0 10px 20px rgba(0,0,0,0.3);
    }
    .teacher-emoji {
      position: relative;
      font-size: 80px;
      z-index: 2;
      filter: drop-shadow(0 5px 10px rgba(0,0,0,0.4));
    }

    .landing-title {
      font-size: 28px;
      font-weight: 800;
      color: #ffffff;
      margin: 0 0 8px 0;
      text-shadow: 0 2px 10px rgba(0,0,0,0.3);
    }

    .landing-subtitle {
      font-size: 16px;
      color: #cbd5e1;
      margin: 0 0 30px 0;
      font-weight: 600;
    }
    .btn-landing {
      background: linear-gradient(90deg, #4F46E5 0%, #7C3AED 100%);
      color: white;
      font-size: 18px;
      font-weight: 700;
      padding: 16px;
      width: 100%;
      border-radius: 50px;
      border: none;
      cursor: pointer;
      box-shadow: 0 10px 25px rgba(124, 58, 237, 0.4);
      display: flex; align-items: center; justify-content: center; gap: 10px;
    }
    .btn-landing:active { transform: scale(0.98); }

    /* --- NAVIGASI MENU --- */
    .nav-menu {
      display: flex;
      background: rgba(0,0,0,0.3);
      padding: 10px;
      padding-left: 15px; 
      padding-right: 15px; 
      overflow-x: auto;
      gap: 10px;
      justify-content: flex-start;
    }
    .nav-item {
      padding: 10px 20px;
      border-radius: 12px;
      cursor: pointer;
      white-space: nowrap;
      font-weight: 700;
      color: var(--text-muted);
      border: 1px solid transparent;
      font-size: 14px;
    }
    .nav-item:hover { background: var(--glass); color: #fff; }
    .nav-item.active {
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      color: #fff;
      box-shadow: 0 4px 15px rgba(124, 58, 237, 0.4);
    }

    /* --- KONTEN AREA --- */
    .content-area {
      padding: 25px;
      flex: 1;
      overflow-y: auto;
    }
    .section { display: none; animation: fadeIn 0.5s; }
    .section.active { display: block; }
    @keyframes fadeIn { from {opacity:0; transform: translateY(10px);} to {opacity:1; transform: translateY(0);} }

    h2 { color: var(--accent-2); border-bottom: 2px solid var(--glass); padding-bottom: 10px; margin-top: 0; font-size: 22px; }

    /* --- STYLING TEKS --- */
    .arab-text-box {
      background: var(--glass);
      padding: 20px; border-radius: var(--radius);
      text-align: right; direction: rtl;
      font-size: 32px;
      line-height: 2.2;
      font-family: 'Traditional Arabic', serif;
      color: #fbbf24; 
      margin-bottom: 20px;
    }
    .indo-trans {
      background: rgba(6, 182, 212, 0.1);
      padding: 15px; border-radius: var(--radius);
      border-left: 4px solid var(--accent-2);
      line-height: 1.6; font-size: 15px;
    }

    /* --- KOSAKATA & PROFESI --- */
    .vocab-list { 
        display: grid; 
        grid-template-columns: 1fr; 
        gap: 12px; 
    }
    .vocab-item {
      display: flex; 
      justify-content: space-between; 
      align-items: center;
      background: var(--card-bg); 
      padding: 15px; 
      border-radius: 14px;
      border: 1px solid var(--border);
    }
    .vocab-indo { 
      font-weight: bold; 
      color: var(--accent-2); 
      font-size: 16px; 
      flex-shrink: 0; 
      padding-right: 15px; 
    }
    .vocab-arab { 
      font-size: 24px; 
      color: #fbbf24; 
      font-family: 'Traditional Arabic', serif;
      text-align: right;
      overflow-wrap: break-word; 
    }


    /* --- GALERI PROFESI (Fix Rasio Gambar 9:16) --- */
    .profesi-grid { 
        display: grid; 
        grid-template-columns: repeat(2, 1fr); 
        gap: 15px; 
    }
    .card {
      background: var(--card-bg); border-radius: var(--radius); overflow: hidden;
      text-align: center; border: 1px solid var(--border);
      display: flex; 
      flex-direction: column; 
    }
    .card-img {
      position: relative; 
      width: 100%;
      height: 0; 
      padding-bottom: 177.78%; /* Rasio 9:16 (Tinggi 177.78%) */
      background-color: #334155; 
      background-size: cover; 
      background-position: center; 
      background-repeat: no-repeat;
      display: flex; 
      align-items: center; 
      justify-content: center; 
      font-size: 50px; 
      color: transparent; 
      flex-shrink: 0; 
    }
    .card-body { 
        padding: 10px; 
        flex-grow: 1; 
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .card-title { font-size: 16px; margin: 0; color: #fff; font-weight: 700; }

    /* --- GAME SAMBUNGKAN --- */
    .game-area { display: flex; gap: 12px; }
    .draggable-col, .drop-col { display: flex; flex-direction: column; gap: 12px; flex: 1; }
    
    .draggable-item {
      background: var(--card-bg); 
      height: 64px;
      width: 100%;
      padding: 0 15px; 
      border-radius: 12px; 
      cursor: grab;
      border: 1px solid var(--accent-2); 
      display: flex; 
      align-items: center; 
      gap: 12px; 
      justify-content: flex-start; 
    }
    
    .draggable-item span {
      font-weight:bold; 
      font-size:13px; 
    }

    .drop-zone {
      background: rgba(255,255,255,0.05); 
      border: 2px dashed var(--text-muted);
      border-radius: 12px; 
      height: 64px;
      width: 100%;
      display: flex; 
      align-items: center; 
      justify-content: flex-end; 
      padding-right: 15px; 
      font-size: 16px; 
      line-height: 1.2;
      color: #fbbf24; 
      font-family: 'Traditional Arabic';
    }
    
    /* --- MODIFIKASI STYLE GAME --- */
    .drop-zone.hover { 
      border-color: var(--accent); 
    }
    .drop-zone.correct-final { 
      border: 2px solid #22c55e; 
      background: rgba(34, 197, 94, 0.2); 
      color: #22c55e; 
      font-weight: bold; 
    }
    .drop-zone.wrong-final { 
      border: 2px solid #ef4444; 
      background: rgba(239, 68, 68, 0.2); 
      color: #ef4444; 
      font-weight: bold; 
    }


    /* --- SOAL --- */
    .question-card {
      background: var(--card-bg); padding: 18px; margin-bottom: 15px; border-radius: 14px;
    }
    
    .question-card label strong { 
      font-family: 'Traditional Arabic', 'Nunito', sans-serif; 
      font-size: 18px; 
      font-weight: bold; 
      color: #fbbf24; 
    }
    
    input, select {
      width: 100%; padding: 12px; margin-top: 8px; border-radius: 10px;
      border: none; background: #ffffff; color: #333;
      font-size: 16px; font-family: 'Nunito', sans-serif;
    }
    /* Warna feedback untuk input soal */
    .question-card input[type="text"], .question-card select {
        transition: background-color 0.4s ease;
    }
    input:focus { outline: 3px solid var(--accent-2); }

    /* --- HASIL --- */
    .input-panel-wrapper {
      background: var(--card-bg); padding: 20px; border-radius: 16px;
    }
    .input-group { 
        display: grid; 
        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); 
        gap: 15px; 
        margin-bottom: 20px; 
    }
    .btn-action {
      background: var(--accent); color: white; border: none; padding: 14px 20px;
      border-radius: 12px; cursor: pointer; font-weight: 800; width: 100%;
      font-family: 'Nunito', sans-serif;
    }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; background: rgba(0,0,0,0.2); border-radius: 12px; overflow: hidden;}
    th, td { text-align: left; padding: 12px; border-bottom: 1px solid var(--border); }
    th { background: rgba(255,255,255,0.1); color: var(--accent-2); font-weight: 700; }
    td { font-weight: 600; }

  </style>
</head>
<body>

<div class="app-container">
  
  <div id="landing-page">
    <div class="hero-illustration">
      <div class="board-bg"></div>
      <div class="teacher-emoji">ğŸ‘¨â€ğŸ«</div>
    </div>
    <h1 class="landing-title">Belajar Bahasa Arab</h1>
    <p class="landing-subtitle">Tema: Profesi (Ø§Ù„Ù’Ù…ÙÙ‡Ù’Ù†ÙØ©Ù)</p>
    <button class="btn-landing" onclick="enterApp()">Mulai Belajar ğŸš€</button>
  </div>

  <nav class="nav-menu" id="main-nav" style="display:none;">
    <div class="nav-item active" onclick="switchTab('teks')">TEKS</div>
    <div class="nav-item" onclick="switchTab('kosakata')">KOSAKATA</div>
    <div class="nav-item" onclick="switchTab('profesi')">PROFESI</div>
    <div class="nav-item" onclick="switchTab('sambungkan')">SAMBUNGKAN</div>
    <div class="nav-item" onclick="switchTab('soal')">SOAL</div>
    <div class="nav-item" onclick="switchTab('hasil')">HASIL</div>
  </nav>

  <div class="content-area" id="main-content" style="display:none;">
    
    <div id="teks" class="section active">
      <h2>Ø§ÙÙ„Ù’Ù…ÙÙ‡Ù’Ù†ÙØ©Ù (Profesi)</h2>
      <div class="arab-text-box">
        Ø§ÙÙ„Ù’Ù…ÙÙ‡Ù’Ù†ÙØ©Ù<br>
        ÙŠÙØªÙÙƒÙÙ„ÙÙ‘Ù…Ù Ø¹ÙÙ„ÙÙŠÙŒÙ‘ Ù…ÙØ¹Ù Ø®ÙÙ„ÙÙŠÙ„Ù ÙÙÙŠ Ù…ÙÙƒÙ’ØªÙØ¨ÙØ©Ù Ø§Ù„Ù’Ù…ÙØ¯Ù’Ø±ÙØ³ÙØ©Ù Ø¹ÙÙ†Ù Ø§Ù„Ù’Ù…ÙÙ‡Ù’Ù†ÙØ©Ù. Ø°ÙÙƒÙØ±Ù Ø¹ÙÙ„ÙÙŠÙŒÙ‘ Ø£ÙÙ†Ù’ÙˆÙØ§Ø¹Ù Ø§Ù„Ù’Ù…ÙÙ‡Ù’Ù†ÙØ©ÙØŒ Ù‡ÙÙŠÙ: Ù…ÙØ¯ÙØ±ÙÙ‘Ø³ÙŒØŒ ÙˆÙÙÙÙ„ÙÙ‘Ø§Ø­ÙŒØŒ ÙˆÙØªÙØ§Ø¬ÙØ±ÙŒØŒ ÙˆÙÙ…ÙÙˆÙØ¸ÙÙ‘ÙÙŒØŒ ÙˆÙØ·ÙØ¨ÙÙŠØ¨ÙŒØŒ ÙˆÙÙ…ÙÙ…ÙØ±ÙÙ‘Ø¶ÙŒØŒ ÙˆÙØ´ÙØ±Ù’Ø·ÙÙŠÙŒÙ‘ØŒ ÙˆÙØ¬ÙÙ†Ù’Ø¯ÙÙŠÙŒÙ‘ØŒ ÙˆÙÙ…ÙÙ‡ÙÙ†Ù’Ø¯ÙØ³ÙŒØŒ ÙˆÙØºÙÙŠÙ’Ø±Ù Ø°ÙÙ„ÙÙƒÙ. ÙŠÙØªÙÙ…ÙÙ†ÙÙ‘Ù‰ Ø¹ÙÙ„ÙÙŠÙŒÙ‘ Ø£ÙÙ†Ù’ ÙŠÙÙƒÙÙˆÙ†Ù Ø·ÙØ¨ÙÙŠØ¨Ù‹Ø§ ÙÙÙŠ Ø§Ù„Ù’Ù…ÙØ³Ù’ØªÙÙ‚Ù’Ø¨ÙÙ„ÙØŒ ÙˆÙÙŠÙØªÙÙ…ÙÙ†ÙÙ‘Ù‰ Ø®ÙÙ„ÙÙŠÙ’Ù„ÙŒ Ø£ÙÙ†Ù’ ÙŠÙÙƒÙÙˆÙ’Ù†Ù Ø´ÙØ±Ù’Ø·ÙÙŠÙ‹Ù‘Ø§ ÙÙÙŠ Ø§Ù„Ù’Ù…ÙØ³Ù’ØªÙÙ‚Ù’Ø¨ÙÙ„Ù.
      </div>
      <div class="indo-trans">
        <strong>Terjemahan:</strong><br>
        Ali berbicara dengan Khalil di perpustakaan sekolah tentang profesi. Ali menyebutkan berbagai jenis profesi yaitu guru, petani, pedagang, pegawai, dokter, perawat, polisi, tentara, insinyur, dan lain-lain. Ali berharap menjadi dokter di masa depan, dan Khalil berharap menjadi polisi di masa depan.
      </div>
    </div>

    <div id="kosakata" class="section">
      <h2>Daftar Kosakata (Ø§ÙÙ„Ù’Ù…ÙÙÙ’Ø±ÙØ¯ÙØ§ØªÙ)</h2>
      <div class="vocab-list" id="vocab-container"></div>
    </div>

    <div id="profesi" class="section">
      <h2>Galeri Profesi</h2>
      <div class="profesi-grid" id="gallery-container"></div>
    </div>

    <div id="sambungkan" class="section">
      <h2>Game: Sambungkan Gambar</h2>
      <p>Tarik gambar di sebelah kiri ke kotak teks Arab yang sesuai di sebelah kanan!</p>
      <div class="game-area">
        <div class="draggable-col" id="drag-source"></div>
        <div class="drop-col" id="drop-target"></div>
      </div>
    </div>

    <div id="soal" class="section">
      <h2>Latihan Soal</h2>
      <form id="quiz-form">
        <div class="question-card">
          <label>1. Terjemahkan ke B.Indonesia: <strong>ÙÙÙ†ÙÙ‘Ø§Ù†ÙŒ</strong></label>
          <input type="text" placeholder="Jawab disini..." name="q1">
        </div>
        <div class="question-card">
          <label>2. Terjemahkan ke B.Indonesia: <strong>Ø·ÙØ¨ÙÙŠØ¨ÙŒ</strong></label>
          <input type="text" placeholder="Jawab disini..." name="q2">
        </div>
        <div class="question-card">
          <label>3. Buatlah contoh kalimat dari kata: <strong>ÙÙÙ„ÙÙ‘Ø§Ø­ÙŒ</strong></label>
          <input type="text" placeholder="Jawab disini..." name="q3">
        </div>
        <div class="question-card">
          <label>4. Buatlah contoh kalimat dari kata: <strong>Polisi</strong></label>
          <input type="text" placeholder="Jawab disini..." name="q4">
        </div>
        <div class="question-card">
          <label>5. Bahasa Arab dari: <strong>Pedagang</strong></label>
          <input type="text" placeholder="Jawab disini..." name="q5">
        </div>
        <div class="question-card">
          <label>6. Bahasa Arab dari: <strong>Insinyur</strong></label>
          <input type="text" placeholder="Jawab disini..." name="q6">
        </div>
        <div class="question-card">
          <label>7. Siapa yang bekerja di sawah?</label>
          <select name="q7">
            <option value="">Pilih Jawaban</option>
            <option value="a">Ø·ÙØ¨ÙÙŠØ¨ÙŒ</option>
            <option value="b">ÙÙÙ„ÙÙ‘Ø§Ø­ÙŒ</option>
            <option value="c">Ø´ÙØ±Ù’Ø·ÙÙŠÙŒÙ‘</option>
          </select>
        </div>
        <div class="question-card">
          <label>8. Siapa yang mengobati orang sakit?</label>
          <select name="q8">
            <option value="">Pilih Jawaban</option>
            <option value="a">Ø·ÙØ¨ÙÙŠØ¨ÙŒ</option>
            <option value="b">Ù…ÙÙˆÙØ¸ÙÙ‘ÙÙŒ</option>
            <option value="c">Ø¬ÙÙ†Ù’Ø¯ÙÙŠÙŒÙ‘</option>
          </select>
        </div>
        <div class="question-card">
          <label>9. Arti dari <strong>'Ø¬ÙÙ†Ù’Ø¯ÙÙŠÙŒÙ‘'</strong> adalah?</label>
          <select name="q9">
            <option value="">Pilih Jawaban</option>
            <option value="a">Polisi</option>
            <option value="b">Tentara</option>
            <option value="c">Guru</option>
          </select>
        </div>
        <div class="question-card">
          <label>10. Apa profesi impian kalian?</label>
          <input type="text" placeholder="Jawab disini..." name="q10">
        </div>
      </form>
      
      <button class="btn-action" style="background:#06b6d4; margin-top: 15px;" onclick="calculateQuizScore()">
          SELESAI
      </button>
      <p id="quiz-score-display" style="text-align:center; margin-top:15px; font-weight:bold; font-size:20px; color:#fbbf24; display:none;"></p>
    </div>

    <div id="hasil" class="section">
      <h2>Hasil dan Ranking</h2>
      
      <div id="input-panel" class="input-panel-wrapper">
        <div class="input-group">
          <div>
            <label style="font-size:14px; color:#bbb; margin-bottom:5px; display:block;">Nama Siswa:</label>
            <input type="text" id="inp-nama" placeholder="Nama Lengkap...">
          </div>
          <div>
            <label style="font-size:14px; color:#bbb; margin-bottom:5px; display:block;">Nilai:</label>
            <input type="number" id="inp-nilai" placeholder="...">
          </div>
        </div>
        <button class="btn-action" onclick="addStudent()">TAMBAHKAN</button>
        <div id="temp-list-msg" style="color:var(--accent-2); margin-top:15px; font-style:italic; text-align:center;">Data belum dikunci.</div>
        <hr style="border:0; border-top:1px solid #ffffff20; margin: 20px 0;">
        <button class="btn-action" style="background:#ef4444;" onclick="finishInput()">SELESAI</button>
      </div>

      <div id="result-panel" style="display:none; margin-top:20px;">
        <button class="btn-action" style="background:#22c55e; width:100%;" onclick="showRanking()">LIHAT HASIL RANKING</button>
        <table id="ranking-table" style="display:none;">
          <thead><tr><th>Rank</th><th>Nama</th><th>Nilai</th></tr></thead>
          <tbody id="ranking-body"></tbody>
        </table>
        <button class="btn-action" style="margin-top:20px; background: #64748b" onclick="resetData()">Reset Data</button>
      </div>
    </div>

  </div>
</div>

<script>
  // ======================================================================
  // DATA PROFESI
  // ======================================================================
  const dataProfesi = [
    { id: 1, indo: "1. Guru", arab: "Ù¡. Ù…ÙØ¯ÙØ±ÙÙ‘Ø³ÙŒ", emoji: "ğŸ‘¨â€ğŸ«", imageUrl: "https://g.top4top.io/p_3610h0t680.jpeg" }, 
    { id: 2, indo: "2. Petani", arab: "Ù¢. ÙÙÙ„ÙÙ‘Ø§Ø­ÙŒ", emoji: "ğŸŒ¾", imageUrl: "https://h.top4top.io/p_3610fl2251.jpeg" }, 
    { id: 3, indo: "3. Pedagang", arab: "Ù£. ØªÙØ§Ø¬ÙØ±ÙŒ", emoji: "ğŸª", imageUrl: "https://i.top4top.io/p_3610hvjf92.jpeg" }, 
    { id: 4, indo: "4. Pegawai", arab: "Ù¤. Ù…ÙÙˆÙØ¸ÙÙ‘ÙÙŒ", emoji: "ğŸ’¼", imageUrl: "https://j.top4top.io/p_3610oa24u3.jpeg" }, 
    { id: 5, indo: "5. Dokter & Perawat", arab: "Ù¥. Ø·ÙØ¨ÙÙŠØ¨ÙŒ ÙˆÙ Ù…ÙÙ…ÙØ±ÙÙ‘Ø¶ÙŒ", emoji: "ğŸ‘¨â€âš•ï¸", imageUrl: "https://k.top4top.io/p_3610qval84.jpeg" }, 
    { id: 6, indo: "6. Polisi", arab: "Ù¦. Ø´ÙØ±Ù’Ø·ÙÙŠÙŒÙ‘", emoji: "ğŸ‘®â€â™‚ï¸", imageUrl: "https://l.top4top.io/p_36106496u5.jpeg" }, 
    { id: 7, indo: "7. Tentara", arab: "Ù§. Ø¬ÙÙ†Ù’Ø¯ÙÙŠÙŒÙ‘", emoji: "ğŸ–ï¸", imageUrl: "https://a.top4top.io/p_36105hvdq6.jpeg" }, 
    { id: 8, indo: "8. Insinyur", arab: "Ù¨. Ù…ÙÙ‡ÙÙ†Ù’Ø¯ÙØ³ÙŒ", emoji: "ğŸ‘·", imageUrl: "https://b.top4top.io/p_361028nhc7.jpeg" }, 
    { id: 9, indo: "9. Seniman", arab: "Ù©. ÙÙÙ†ÙÙ‘Ø§Ù†ÙŒ", emoji: "ğŸ¨", imageUrl: "https://c.top4top.io/p_361006tie8.jpeg" }, 
    { id: 10, indo: "10. Arsitek", arab: "Ù¡Ù . Ù…ÙÙ‡ÙÙ†Ù’Ø¯ÙØ³ÙŒ Ù…ÙØ¹Ù’Ù…ÙØ§Ø±ÙÙŠÙŒÙ‘", emoji: "ğŸ›ï¸", imageUrl: "https://h.top4top.io/p_3610ff68q0.jpeg" } 
  ];
  // ======================================================================

  function enterApp() {
    document.getElementById('landing-page').style.display = 'none';
    document.getElementById('main-nav').style.display = 'flex';
    document.getElementById('main-content').style.display = 'block';
    initContent();
  }

  function switchTab(tabId) {
    document.querySelectorAll('.section').forEach(el => el.classList.remove('active'));
    document.getElementById(tabId).classList.add('active');
    document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
    const tabs = ['teks', 'kosakata', 'profesi', 'sambungkan', 'soal', 'hasil'];
    const idx = tabs.indexOf(tabId);
    if(idx >= 0) document.querySelectorAll('.nav-item')[idx].classList.add('active');
  }

  function initContent() {
    const vocabContainer = document.getElementById('vocab-container');
    vocabContainer.innerHTML = ''; 
    dataProfesi.forEach(item => {
      vocabContainer.innerHTML += `
        <div class="vocab-item">
          <div class="vocab-indo">${item.indo}</div>
          <div class="vocab-arab">${item.arab}</div>
        </div>
      `;
    });

    const galleryContainer = document.getElementById('gallery-container');
    galleryContainer.innerHTML = ''; 
    dataProfesi.forEach(item => {
      galleryContainer.innerHTML += `
        <div class="card">
          <div class="card-img" style="background-image: url('${item.imageUrl}');"></div>
          <div class="card-body"><h3 class="card-title">${item.indo.split('. ')[1]}</h3></div>
        </div>
      `;
    });
    initGame();
  }
  
  // ======================================================================
  // FUNGSI GAME SAMBUNG KATA (Penghitungan skor 10 per jawaban benar)
  // ======================================================================

  function initGame() {
    const source = document.getElementById('drag-source');
    const target = document.getElementById('drop-target');
    source.innerHTML = ''; 
    target.innerHTML = ''; 

    let gameDataDraggable = [...dataProfesi]; 
    gameDataDraggable.sort(() => Math.random() - 0.5); 

    gameDataDraggable.forEach(item => {
      const div = document.createElement('div');
      div.className = 'draggable-item';
      div.draggable = true;
      div.id = 'drag-' + item.id;
      
      // GAMBAR DALAM BACKGROUND 
      
      div.innerHTML = `<div style="width: 40px; height: 40px; border-radius: 8px; background-image: url('${item.imageUrl}'); background-size: cover; background-position: center;"></div> <span>${item.indo.split('. ')[1]}</span>`;
      div.addEventListener('dragstart', (e) => {
    
        if (div.style.visibility !== 'hidden') {
            e.dataTransfer.setData("text", item.id);
        } else {
            e.preventDefault();
        }
      });
      source.appendChild(div);
    });

    // URUTAN DRAG & DROP FOTO YA AJG
    
    dataProfesi.forEach(item => {
      const zone = document.createElement('div');
      zone.className = 'drop-zone';
      zone.setAttribute('data-id', item.id);
      zone.innerHTML = item.arab; 
      
      zone.addEventListener('dragover', (e) => {
        e.preventDefault(); 
        
        // Hanya tambahkan hover jika drop zone belum final (benar/salah)
        
        if (!zone.classList.contains('correct-final') && !zone.classList.contains('wrong-final')) {
          zone.classList.add('hover');
        }
      });
      
      zone.addEventListener('dragleave', () => {
        zone.classList.remove('hover');
      });
      
      zone.addEventListener('drop', (e) => {
        e.preventDefault();
        zone.classList.remove('hover'); 
        
        // HENTIKAN DROP JIKA ZONA SUDAH DIISI
        
        if (zone.classList.contains('correct-final') || zone.classList.contains('wrong-final')) {
            return; 
        }

        const draggedId = e.dataTransfer.getData("text");
        const draggedItem = document.getElementById('drag-'+draggedId);
        
        if (draggedId == item.id) {
          
          // --- LOGIKA BENAR (Hijau Permanen) ---
          
          zone.classList.add('correct-final');
          zone.innerHTML = item.arab; 
          if(draggedItem) draggedItem.style.visibility = 'hidden'; 
          checkGameCompletion();
          
        } else {
          
          // --- LOGIKA SALAH (Merah Permanen + Item Hilang) ---
          
          zone.classList.add('wrong-final'); // Set warna merah permanen
          
          // Tampilkan teks Arab di drop zone, tetapi dengan warna merah (dari CSS)
          
          zone.innerHTML = item.arab; 
          
          // Item yang salah ditarik tetap hilang permanen
          
          if(draggedItem) draggedItem.style.visibility = 'hidden'; 
          checkGameCompletion(); 
        }
      });
      target.appendChild(zone);
    });
  }

  function checkGameCompletion() {
      const dropZones = document.querySelectorAll('#drop-target .drop-zone');
      let allAnswered = true;
      let score = 0; 
    
      dropZones.forEach(zone => {
          if (!zone.classList.contains('correct-final') && !zone.classList.contains('wrong-final')) {
              allAnswered = false;
          }
        
          // Hitung skor: Jika zona memiliki kelas 'correct-final', tambahkan 10 poin
        
          if (zone.classList.contains('correct-final')) {
              score += 10;
          }
      });
    
      const remainingItems = document.querySelectorAll('#drag-source .draggable-item');
      let allHidden = true;
      remainingItems.forEach(item => {
          if (item.style.visibility !== 'hidden') {
              allHidden = false;
          }
      });

      if (allAnswered || allHidden) {
          const gameArea = document.querySelector('#sambungkan .game-area');
          let successMsg = document.getElementById('game-success-message');
          
          if (!successMsg) {
            
              // Jika pesan belum ada, buat pesan baru
            
              successMsg = document.createElement('p');
              successMsg.id = 'game-success-message';
              successMsg.style.cssText = 'text-align: center; font-weight: bold; margin-top: 20px; font-size: 18px; padding: 10px; border-radius: 10px;';
              gameArea.parentNode.insertBefore(successMsg, gameArea.nextSibling);
          }
          
          // Tentukan warna dan teks berdasarkan skor
        
          let msgText = `GAME SELESAI! SKOR ANDA: ${score} / 100`;
        
          // Warna: Hijau (100), Kuning (70-90), Merah (di bawah 70)
        
          let msgColor = (score === 100) ? '#22c55e' : (score >= 70 ? '#fbbf24' : '#ef4444');
          let bgColor = (score === 100) ? 'rgba(34, 197, 94, 0.1)' : (score >= 70 ? 'rgba(251, 191, 36, 0.1)' : 'rgba(239, 68, 68, 0.1)');

          successMsg.innerHTML = msgText;
          successMsg.style.color = msgColor;
          successMsg.style.background = bgColor;
      }
  }

  // ========================================
  // FUNGSI PENILAIAN SOAL (10 Poin per Soal) 
  // ========================================

  function calculateQuizScore() {
    const form = document.getElementById('quiz-form');
    let totalScore = 0;
    
    // Kunci Jawaban (mengabaikan kapitalisasi dan spasi untuk jawaban ketik)
    
    const answerKey = {
        q1: 'seniman',       // ÙÙÙ†ÙÙ‘Ø§Ù†ÙŒ = Seniman
        q2: 'dokter',        // Ø·ÙØ¨ÙÙŠØ¨ÙŒ = Dokter
        q5: 'ØªÙØ§Ø¬ÙØ±ÙŒ',      // Pedagang = ØªÙØ§Ø¬ÙØ±ÙŒ
        q6: 'Ù…ÙÙ‡ÙÙ†Ù’Ø¯ÙØ³ÙŒ',    // Insinyur = Ù…ÙÙ‡ÙÙ†Ù’Ø¯ÙØ³ÙŒ
        q7: 'b',             // Siapa yang bekerja di sawah? (ÙÙÙ„ÙÙ‘Ø§Ø­ÙŒ)
        q8: 'a',             // Siapa yang mengobati orang sakit? (Ø·ÙØ¨ÙÙŠØ¨ÙŒ)
        q9: 'b',             // Arti dari 'Ø¬ÙÙ†Ù’Ø¯ÙÙŠÙŒÙ‘' adalah? (Tentara)
    };

    // Urutan semua kunci (termasuk q3, q4, q10 untuk loop)
    
    const allQKeys = ['q1', 'q2', 'q3', 'q4', 'q5', 'q6', 'q7', 'q8', 'q9', 'q10'];

    allQKeys.forEach((key) => {
        const input = form.elements[key];
        let isCorrect = false;

        if (!input) return; 
        
        const inputValue = input.value || ''; 
        
        // --- LOGIKA PENILAIAN ---
      
        if (key === 'q3' || key === 'q4' || key === 'q10') {
          
            // Soal Esai/Opini (q3, q4, q10): Cukup benar jika terisi
          
            if (inputValue.trim() !== '') {
                isCorrect = true;
            }
        } else if (input.type === 'text') {
          
            // Soal Ketik Kunci (q1, q2, q5, q6)
          
            const userAnswer = inputValue.trim().toLowerCase();
            const correctAnswer = answerKey[key] ? answerKey[key].toLowerCase() : ''; 
            
            // Hapus karakter non-teks Arab/Latin untuk perbandingan bersih
            // Memungkinkan perbandingan antara 'dokter' dan 'dokter' atau 'Ø·Ø¨ÙŠØ¨' dan 'Ø·Ø¨ÙŠØ¨'
          
            const cleanUserAnswer = userAnswer.replace(/[^a-z\u0621-\u064A\s]/g, '').trim(); 
            const cleanCorrectAnswer = correctAnswer.replace(/[^a-z\u0621-\u064A\s]/g, '').trim();
            
            if (cleanUserAnswer === cleanCorrectAnswer) {
                isCorrect = true;
            }

        } else if (input.type === 'select-one') {
          
            // Soal Pilihan Ganda (q7, q8, q9)
          
            if (inputValue === answerKey[key]) {
                isCorrect = true;
            }
        }
        
        // --- FEEDBACK VISUAL ---
      
        if (input.type !== 'select-one' && input.type !== 'hidden') {
            input.style.backgroundColor = isCorrect 
                ? 'rgba(34, 197, 94, 0.2)' // Hijau
                : (inputValue.trim() !== '' ? 'rgba(239, 68, 68, 0.2)' : '#ffffff'); // Merah atau Putih (jika kosong)
        } else if (input.type === 'select-one') {
            // Atur background feedback untuk select
            input.style.backgroundColor = isCorrect 
                ? 'rgba(34, 197, 94, 0.2)' // Hijau
                : (inputValue.trim() !== '' ? 'rgba(239, 68, 68, 0.2)' : '#ffffff'); // Merah atau Putih
        }


        if (isCorrect) {
            totalScore += 10;
        }
    });

    const display = document.getElementById('quiz-score-display');
    
    // Tentukan warna dan teks berdasarkan skor
    let msgText = `SKOR ANDA: ${totalScore} / 100`;
    let msgColor = (totalScore === 100) ? '#22c55e' : (totalScore >= 70 ? '#fbbf24' : '#ef4444');

    display.innerHTML = msgText;
    display.style.color = msgColor;
    display.style.display = 'block'; 
    
    alert(`Latihan Soal Selesai! Skor Anda adalah ${totalScore}/100.`);

    // Opsional: Jika ingin tombol di-disable setelah diklik pertama kali
    // document.querySelector('#soal .btn-action').disabled = true;
  }

  // ======================================================================
  // FUNGSI UMUM LAINNYA
  // ======================================================================

  let students = [];
  function addStudent() {
    const name = document.getElementById('inp-nama').value;
    const score = parseInt(document.getElementById('inp-nilai').value);
    if (name && !isNaN(score)) {
      students.push({ name, score });
      document.getElementById('temp-list-msg').innerText = `${students.length} Siswa ditambahkan.`;
      document.getElementById('inp-nama').value = '';
      document.getElementById('inp-nilai').value = '';
      document.getElementById('inp-nama').focus();
    } else {
      alert("Isi Nama dan Nilai dengan benar!");
    }
  }

  function finishInput() {
    if (students.length === 0) return alert("Belum ada data siswa!");
    if (confirm("Yakin data sudah lengkap?")) {
      document.getElementById('input-panel').style.display = 'none';
      document.getElementById('result-panel').style.display = 'block';
    }
  }

  function showRanking() {
    students.sort((a, b) => b.score - a.score);
    const tbody = document.getElementById('ranking-body');
    tbody.innerHTML = '';
    students.forEach((s, index) => {
      let rankEmoji = '';
      if(index === 0) rankEmoji = 'ğŸ¥‡ ';
      if(index === 1) rankEmoji = 'ğŸ¥ˆ ';
      if(index === 2) rankEmoji = 'ğŸ¥‰ ';
      const tr = document.createElement('tr');
      tr.innerHTML = `<td>${rankEmoji}${index + 1}</td><td>${s.name}</td><td style="font-weight:bold; color:${s.score >= 75 ? '#22c55e' : '#f43f5e'}">${s.score}</td>`;
      tbody.appendChild(tr);
    });
    document.getElementById('ranking-table').style.display = 'table';
  }

  function resetData() {
    students = [];
    document.getElementById('input-panel').style.display = 'block';
    document.getElementById('result-panel').style.display = 'none';
    document.getElementById('ranking-table').style.display = 'none';
    document.getElementById('temp-list-msg').innerText = "Data belum dikunci.";
  }
</script>
</body>
</html>
